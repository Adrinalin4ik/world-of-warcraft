{"version":3,"file":"index.js","names":["r","_interopRequireWildcard","require","_xtend","_interopRequireDefault","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","DBC","Struct","signature","String","recordCount","uint32le","fieldCount","recordSize","stringBlockSize","stringBlockOffset","records","Array","Buffer","stringBlock","entity","fields","xtend","_default","exports"],"sources":["../../src/lib/dbc/index.js"],"sourcesContent":["import * as r from 'restructure';\nimport xtend from 'xtend';\n\nconst DBC = new r.Struct({\n  signature: new r.String(4),\n\n  recordCount: r.uint32le,\n  fieldCount: r.uint32le,\n  recordSize: r.uint32le,\n  stringBlockSize: r.uint32le,\n  stringBlockOffset: function() {\n    return 4 * 5 + this.recordCount * this.recordSize;\n  },\n\n  records: new r.Array(new r.Buffer(function() {\n    return this.recordSize;\n  }), function() {\n    return this.recordCount;\n  }),\n\n  stringBlock: new r.Buffer(function() {\n    return this.stringBlockSize;\n  })\n});\n\nDBC.for = function(entity) {\n  const fields = xtend(this.fields, {\n    entity: function() {\n      return entity;\n    },\n    records: new r.Array(entity, function() {\n      return this.recordCount;\n    })\n  });\n  return new r.Struct(fields);\n};\n\nexport default DBC;\n"],"mappings":"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"}