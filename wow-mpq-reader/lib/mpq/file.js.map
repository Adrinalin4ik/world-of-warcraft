{"version":3,"file":"file.js","names":["_stormLib","_interopRequireDefault","require","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","_defineProperty","value","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","File","handle","close","StormLib","SFileCloseFile","get","name","Buffer","MAX_PATH","SFileGetFileName","readCString","SFileGetFileSize","data","size","position","SFileReadFile","set","offset","SFileSetFilePointer","FILE_BEGIN","_default","exports"],"sources":["../../src/lib/mpq/file.js"],"sourcesContent":["import StormLib from './storm-lib';\n\nclass File {\n\n  static FILE_BEGIN   = 0;\n  static FILE_CURRENT = 1;\n  static FILE_END     = 2;\n\n  static MAX_PATH = 260;\n\n  constructor(handle) {\n    this.handle = handle;\n  }\n\n  close() {\n    const handle = this.handle;\n    if (handle) {\n      this.handle = null;\n      return StormLib.SFileCloseFile(handle);\n    }\n  }\n\n  get opened() {\n    return !!this.handle;\n  }\n\n  get name() {\n    if (this.handle) {\n      const name = new Buffer(this.constructor.MAX_PATH);\n      if (!StormLib.SFileGetFileName(this.handle, name)) {\n        return null;\n      }\n      return name.readCString();\n    }\n  }\n\n  get size() {\n    return this.handle && StormLib.SFileGetFileSize(this.handle, null);\n  }\n\n  get data() {\n    if (this.handle) {\n      const data = new Buffer(this.size);\n      this.position = 0;\n      if (!StormLib.SFileReadFile(this.handle, data, this.size, null, null)) {\n        return null;\n      }\n      return data;\n    }\n  }\n\n  set position(offset) {\n    return StormLib.SFileSetFilePointer(this.handle, offset, null, this.constructor.FILE_BEGIN);\n  }\n\n}\n\nexport default File;\n"],"mappings":"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"}